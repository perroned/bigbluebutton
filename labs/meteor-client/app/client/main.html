<template name="footer">
   <div class="myFooter gradientBar navbar navbar-default navbar-fixed-bottom" role="navigation">
      {{{getFooterString}}}
   </div>
</template>

<template name="header">
	{{#if getInSession "display_navbar"}}
		<div id="navbar" class="myNavbar gradientBar navbar navbar-default navbar-fixed-top" role="navigation">
			<div class="navbarUserButtons navbarSection">
				<!-- display/hide users list toggle -->
				{{#if getInSession "display_usersList"}}
					{{#with _ 'hideUsers'}}
						{{> makeButton btn_class="navbarIconToggleActive usersListIcon navbarButton" i_class="user" rel="tooltip" data_placement="bottom" title=this}}
					{{/with}}
				{{else}}
					{{#with _ 'showUsers'}}
						{{> makeButton btn_class="usersListIcon navbarButton" i_class="user" rel="tooltip" data_placement="bottom" title=this}}
					{{/with}}
				{{/if}}

				<!-- display/hide whiteboard toggle -->
				{{#if getInSession "display_whiteboard"}}
					{{#with _ 'hideWhiteboard'}}
						{{> makeButton btn_class="navbarIconToggleActive whiteboardIcon navbarButton" i_class="pencil" rel="tooltip" data_placement="bottom" title=this}}
					{{/with}}
				{{else}}
					{{#with _ 'showWhiteboard'}}
						{{> makeButton btn_class="whiteboardIcon navbarButton" i_class="pencil" rel="tooltip" data_placement="bottom" title=this}}
					{{/with}}
				{{/if}}

				<!-- display/hide chat bar toggle -->
				{{#if getInSession "display_chatbar"}}
					{{#with _ 'hideChat'}}
						{{> makeButton btn_class="navbarIconToggleActive chatBarIcon navbarButton" i_class="comment" rel="tooltip" data_placement="bottom" title=this}}
					{{/with}}
				{{else}}
					{{#with _ 'showChat'}}
						{{> makeButton btn_class="chatBarIcon navbarButton" i_class="comment" rel="tooltip" data_placement="bottom" title=this}}
					{{/with}}
				{{/if}}

				<!-- display/hide webcam streams toggle -->
				<!-- {{#if isCurrentUserSharingVideo}}
				  {{> makeButton btn_class="navbarIconToggleActive videoFeedIcon navbarButton" i_class="stop" sharingVideo=true rel="tooltip" data_placement="bottom" title="Hide Webcams"}}
				{{else}}
				  {{> makeButton btn_class="videoFeedIcon navbarButton" i_class="facetime-video" sharingVideo=false rel="tooltip" data_placement="bottom" title="Show Webcams"}}
				{{/if}} -->

				<!-- Join/hang up audio call -->
				{{#if isCurrentUserSharingAudio}}
					{{#with _ 'leaveAudio'}}
						{{> makeButton btn_class="navbarIconToggleActive audioFeedIcon navbarButton" i_class="volume-off" sharingAudio=true rel="tooltip" data_placement="bottom" title=this}}
					{{/with}}

					{{#if isCurrentUserMuted}}
						{{#with _ 'unmute'}}
							{{> makeButton btn_class="muteIcon navbarButton" i_class="volume-off" sharingAudio=true rel="tooltip" data_placement="bottom" title=this}}
						{{/with}}
					{{else}}
						{{#if isCurrentUserTalking}}
							{{#with _ 'mute'}}
								{{> makeButton btn_class="navbarIconToggleActive muteIcon navbarButton" i_class="volume-up" sharingAudio=true rel="tooltip" data_placement="bottom" title=this}}
							{{/with}}
						{{else}}
							{{#with _ 'mute'}}
								{{> makeButton btn_class="navbarIconToggleActive muteIcon navbarButton" i_class="volume-down" sharingAudio=true rel="tooltip" data_placement="bottom" title=this}}
							{{/with}}
						{{/if}}
					{{/if}}

				{{else}}
					{{#with _ 'joinAudio'}}
						{{> makeButton btn_class="audioFeedIcon navbarButton" i_class="headphones" sharingAudio=false rel="tooltip" data_placement="bottom" title=this}}
					{{/with}}
				{{/if}}

				{{#if isCurrentUserRaisingHand}}
					{{#with _ 'lowerYourHand'}}
						{{> makeButton btn_class="lowerHand navbarIconToggleActive navbarButton" i_class="hand-up" rel="tooltip" data_placement="bottom" title=this}}
					{{/with}}
				{{else}}
					{{#with _ 'raiseYourHand'}}
						{{> makeButton btn_class="raiseHand  navbarButton" i_class="hand-up" rel="tooltip" data_placement="bottom" title=this}}
					{{/with}}
				{{/if}}

				{{> recordingStatus}}
			</div>
			<div class="navbarTitle navbarSection"><span>{{getMeetingName}}</span></div>
			<div class="navbarSettingsButtons navbarSection">
				<!-- {{> makeButton id="userId" btn_class="settingsIcon navbarButton" i_class="cog" rel="tooltip" data_placement="bottom" title="Settings"}} -->
				<!-- {{> makeButton btn_class="hideNavbarIcon navbarButton" i_class="chevron-up" rel="tooltip" data_placement="bottom" title="Hide Navbar"}} -->
				{{#with _ 'logout'}}
					{{> makeButton btn_class="signOutIcon navbarButton" i_class="log-out" rel="tooltip" data_placement="bottom" title=this}}
				{{/with}}
			</div>
		</div>
		<div class="navbarFiller"></div>
	{{else}}
		{{#with _ 'showNavbar'}}
			{{> makeButton id="navbarMinimizedButton" btn_class="hideNavbarIcon navbarMinimizedButtonSmall" i_class="chevron-down" rel="tooltip" data_placement="bottom" title=this}}
		{{/with}}
	{{/if}}
</template>

<template name="main">
	{{setTitle}}
	<body>
		<div id="main" class="mainContainer row-fluid">
 		{{#if isDisconnected}}
			{{>status}}
		{{else}}
			<div>{{> header}}</div>
			{{> usersList id="users" name="usersList"}}
			{{> whiteboard id="whiteboard" title=getWhiteboardTitle name="whiteboard"}}
			{{> chatbar id="chat" title="Chat" name="chatbar"}}
			<audio id="remote-media" autoplay="autoplay"></audio>
			{{> footer}}
		{{/if}}
		</div>
	</body>
</template>

<template name="recordingStatus">
	<!-- Recording status of the meeting -->
	{{#with getCurrentMeeting}}
		{{#if intendedForRecording}} 
			{{#if currentlyBeingRecorded}}
				<button class="recordingStatus recordingStatusTrue" rel="tooltip" data-placement="bottom" title="{{_ 'recordingTooltip'}}"><span class="glyphicon glyphicon-record"></span> {{_ 'recording'}}</button>
			{{else}}
				<button class="recordingStatus recordingStatusFalse" rel="tooltip" data-placement="bottom" title="{{_ 'notRecordingTooltip'}}"><span class="glyphicon glyphicon-record"></span></button>
			{{/if}}
		{{/if}}
	{{/with}}
</template>
